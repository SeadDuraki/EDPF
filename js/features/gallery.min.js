document.addEventListener("DOMContentLoaded",()=>{const galleryImages=document.querySelectorAll(".gallery-container img");const lightboxOverlay=document.getElementById("lightbox-overlay");const lightboxImage=document.getElementById("lightbox-image");const prevButton=document.getElementById("lightbox-prev");const nextButton=document.getElementById("lightbox-next");const backToTopButton=document.querySelector(".back-to-top");const swipeIndicator=document.querySelector(".swipe-indicator");let currentIndex=0;let touchStartY=0;let touchEndY=0;let touchStartX=0;let touchEndX=0;const swipeThreshold=50;const tapThreshold=5;let touchStartTime=0;const swipeMinTime=100;function closeLightbox(){lightboxOverlay.style.display="none";document.body.classList.remove("no-scroll");if(window.scrollY>200){backToTopButton.classList.add("show")}
if(swipeIndicator){swipeIndicator.classList.remove("show-indicator")}}
function openLightbox(index){currentIndex=index;lightboxImage.src=galleryImages[currentIndex].src;lightboxOverlay.style.display="flex";document.body.classList.add("no-scroll");backToTopButton.classList.remove("show");if(window.innerWidth<=768&&swipeIndicator){swipeIndicator.classList.add("show-indicator")}}
function showPrevImage(){currentIndex=(currentIndex-1+galleryImages.length)%galleryImages.length;lightboxImage.src=galleryImages[currentIndex].src}
function showNextImage(){currentIndex=(currentIndex+1)%galleryImages.length;lightboxImage.src=galleryImages[currentIndex].src}
galleryImages.forEach((img,index)=>{img.addEventListener("click",()=>{openLightbox(index)})});lightboxOverlay.addEventListener("click",(e)=>{if(e.target===lightboxOverlay){closeLightbox()}},!1);prevButton.addEventListener("click",showPrevImage);nextButton.addEventListener("click",showNextImage);document.addEventListener("keydown",(e)=>{if(lightboxOverlay.style.display==="flex"){if(e.key==="ArrowLeft"){showPrevImage()}else if(e.key==="ArrowRight"){showNextImage()}else if(e.key==="Escape"){closeLightbox()}}});lightboxOverlay.addEventListener("touchstart",(e)=>{touchStartY=e.touches[0].clientY;touchStartX=e.touches[0].clientX;touchStartTime=Date.now()});lightboxOverlay.addEventListener("touchmove",(e)=>{touchEndY=e.touches[0].clientY;touchEndX=e.touches[0].clientX;const deltaY=Math.abs(touchStartY-touchEndY);if(deltaY>tapThreshold){e.preventDefault()}});lightboxOverlay.addEventListener("touchend",()=>{const touchEndTime=Date.now();const touchDuration=touchEndTime-touchStartTime;const swipeDistance=touchStartY-touchEndY;const absoluteSwipeDistance=Math.abs(swipeDistance);const deltaX=Math.abs(touchStartX-touchEndX);const isMostlyVertical=deltaX<absoluteSwipeDistance;const isValidSwipe=absoluteSwipeDistance>=swipeThreshold&&isMostlyVertical&&touchDuration>=swipeMinTime;touchStartY=0;touchEndY=0;touchStartX=0;touchEndX=0;touchStartTime=0;if(isValidSwipe){if(swipeDistance>0){showNextImage()}else{showPrevImage()}}});window.addEventListener("scroll",()=>{if(window.scrollY>200){backToTopButton.classList.add("show")}else{backToTopButton.classList.remove("show")}});backToTopButton.addEventListener("click",(e)=>{e.preventDefault();window.scrollTo({top:0,behavior:"smooth",})});lightboxOverlay.addEventListener("click",(e)=>{if(e.target===lightboxImage||e.target.closest(".lightbox-content")){e.preventDefault();e.stopPropagation()}},!0)})