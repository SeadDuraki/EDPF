document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelectorAll(".gallery-container img"),t=document.getElementById("lightbox-overlay"),o=document.getElementById("lightbox-image"),n=document.getElementById("lightbox-prev"),s=document.getElementById("lightbox-next"),c=document.querySelector(".back-to-top"),i=document.getElementById("swipe-indicator");let a=0,l=0,d=0,r=0,m=0;let u=0;function y(){const t=e[a].getAttribute("data-lightbox-src")||e[a].src;o.style.opacity="0";const n=new Image;n.src=t,n.onload=function(){o.src=t,o.style.opacity="1"},n.onerror=function(){console.error("Error loading image:",t),o.style.opacity="1"}}function h(){t.style.display="none",document.body.classList.remove("no-scroll"),i&&(i.classList.remove("animate-once"),i.style.opacity="0"),window.scrollY>200&&c.classList.add("show")}function g(){a=(a-1+e.length)%e.length,y()}function v(){a=(a+1)%e.length,y()}e.forEach(((e,o)=>{e.addEventListener("click",(()=>{!function(e){a=e,y(),t.style.display="flex",document.body.classList.add("no-scroll"),c.classList.remove("show"),window.innerWidth<=768&&i&&(i.classList.remove("animate-once"),i.style.opacity="0",setTimeout((()=>{i.classList.add("animate-once"),setTimeout((()=>{i.classList.remove("animate-once"),i.style.opacity="0"}),4e3)}),500))}(o)}))})),t.addEventListener("click",(e=>{e.target===t&&h()}),!1),n.addEventListener("click",g),s.addEventListener("click",v),document.addEventListener("keydown",(e=>{"flex"===t.style.display&&("ArrowLeft"===e.key?g():"ArrowRight"===e.key?v():"Escape"===e.key&&h())})),t.addEventListener("touchstart",(e=>{l=e.touches[0].clientY,r=e.touches[0].clientX,u=Date.now()})),t.addEventListener("touchmove",(e=>{d=e.touches[0].clientY,m=e.touches[0].clientX;Math.abs(l-d)>5&&e.preventDefault()})),t.addEventListener("touchend",(()=>{const e=Date.now()-u,t=l-d,o=Math.abs(t),n=Math.abs(r-m);l=0,d=0,r=0,m=0,u=0,o>=50&&n<o&&e>=100&&(t>0?v():g())})),window.addEventListener("scroll",(()=>{window.scrollY>200?c.classList.add("show"):c.classList.remove("show")})),c.addEventListener("click",(e=>{e.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})})),t.addEventListener("click",(e=>{(e.target===o||e.target.closest(".lightbox-content"))&&(e.preventDefault(),e.stopPropagation())}),!0)}));