var cbpBGSlideshow = function () { var n, a = $("#cbp-bislideshow"), i = a.children("li"), c = i.length, s = $("#cbp-bicontrols"), e = { $navPrev: s.find("span.cbp-biprev"), $navNext: s.find("span.cbp-binext"), $navPlayPause: s.find("span.cbp-bipause") }, o = Math.floor(Math.random() * c), t = !0; function p(n) { var a = i.eq(o); "next" === n ? o = o < c - 1 ? ++o : 0 : "prev" === n && (o = o > 0 ? --o : c - 1); var s = i.eq(o); a.css("opacity", 0), s.css("opacity", 1) } function r() { t = !0, clearTimeout(n), n = setTimeout(function () { p("next"), r() }, 3500) } return { init: function c(s) { a.imagesLoaded(function () { Modernizr.backgroundsize ? i.each(function () { var n = $(this); n.css("background-image", "url(" + n.find("img").attr("src") + ")") }) : a.find("img").show(), i.eq(o).css("opacity", 1), e.$navPlayPause.on("click", function () { var a = $(this); a.hasClass("cbp-biplay") ? (a.removeClass("cbp-biplay").addClass("cbp-bipause"), r()) : (a.removeClass("cbp-bipause").addClass("cbp-biplay"), t = !1, clearTimeout(n)) }), e.$navPrev.on("click", function () { p("prev"), t && r() }), e.$navNext.on("click", function () { p("next"), t && r() }), r() }) } } }();